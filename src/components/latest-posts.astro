---
import { getCollection } from "astro:content";
import Posts from "@/components/posts.astro";

const posts = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.filter((post) => !post.data.planned && post.data.published);
---

<div class="space-y-8">
	<div class="flex items-end justify-between">
		<h2 class="text-2xl font-bold">Latest Posts</h2>
		{
			posts.length > 0 && (
				<a
					href="/blog"
					class="text-sm font-medium underline-offset-2 hover:underline"
				>
					View all
				</a>
			)
		}
	</div>
	{
		posts.length > 0 ? (
			<Posts posts={posts} />
		) : (
			<p class="font-semibold">
				There is no posts here yet but I'm currently working on a tutorial
				series called "Lambda Calculus For All". Stay Tuned!
			</p>
		)
	}
</div>

